# modules-loader
Скрипт содержит IIFE функцию, которая отвечает за загрузку и инициализацию js модулей определенных в глобальной перемнной app.modules. Скрипт предоставляет механизм для обработки загрузки модулей в зависимости от состояния приложения и готовности DOM.

## Функции
### _loadMainModules(eventName)
Эта функция отвечает за загрузку и инициализацию основных модулей приложения. В качестве параметра она принимает имя события (`eventName`), которое должно быть либо `'load'`, либо `'ready'`.

Функция перебирает все модули в объекте `app.modules`. Если в модуле есть метод, соответствующий имени события, то этот метод вызывается. Если модуль уже был инициирован, он пропускается. Если во время вызова метода произошла ошибка, она записывается в консоль.

Функция выполняется после задержки в 10 миллисекунд.

### _onWindowLoad()
Эта функция выполняется при наступлении события `'load'` в `window`. Если промис `app.config.authIsComplete` разрешен, она вызывает функцию `_loadMainModules` с `'load'` в качестве имени события. Если обещание отсутствует, вызывается непосредственно функция `_loadMainModules` с `'load'` в качестве имени события.

### _listener()
Эта функция устанавливает слушателей для событий `'DOMContentLoaded'` и `'load'`. При наступлении события `'DOMContentLoaded'` вызывается функция `_loadMainModules` с именем события `'ready'`. При наступлении события `'load'` вызывается функция `_onWindowLoad`.
Функция выполняется только в том случае, если определены модули `app.modules`.

## Использование
Эта утилита автоматически вызывается при загрузке скрипта. Ее не нужно вызывать вручную. Она ожидает, что объект `app.modules` будет определен и заполнен модулями приложения. Каждый модуль может иметь методы `'load'` и `'ready'`, которые вызываются при наступлении соответствующих событий браузера.
